<!DOCTYPE html>
<html lang="en">
  <head>
    <title>DACSDKPingV  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="DACSDKPingV  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">DACSDKPingV Docs</a> (100% documented)</p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">DACSDKPingV Reference</a>
        <img id="carat" src="img/carat.png" />
        DACSDKPingV  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/DACSDKPingV.html">DACSDKPingV</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DACSDKPingVApplicationDataCenter.html">DACSDKPingVApplicationDataCenter</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/DACSDKPingVErrorCode.html">DACSDKPingVErrorCode</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/DACSDKPingVApplicationDataCenterDelegate.html">DACSDKPingVApplicationDataCenterDelegate</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <a href='#dac-pingv-sdk-ios' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='dac-pingv-sdk-ios'>DAC PingV SDK(iOS)</h1>
<a href='#' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id=''>バージョン</h2>

<ul>
<li>1.2.0</li>
</ul>
<a href='#' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id=''>目次</h2>

<ul>
<li><a href="#%E5%BF%85%E8%A6%81%E6%9D%A1%E4%BB%B6">必要条件</a></li>
<li><a href="#%E6%A6%82%E8%A6%81">概要</a></li>
<li><a href="#%E4%BD%BF%E3%81%84%E6%96%B9">使い方</a></li>
<li><a href="#%E9%80%81%E4%BF%A1%E3%83%87%E3%83%BC%E3%82%BF">送信データ</a></li>
<li><a href="#%E6%94%B9%E8%A8%82%E5%B1%A5%E6%AD%B4">改訂履歴</a></li>
<li><a href="#%E8%AC%9D%E8%BE%9E">謝辞</a></li>
<li><a href="#%E8%91%97%E4%BD%9C%E6%A8%A9">著作権</a></li>
</ul>
<a href='#div-id-div' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='div-id-div'><div id="必要条件">必要条件</div></h2>

<table><thead>
<tr>
<th style="text-align: left">ファイル名</th>
<th style="text-align: left">Xcode</th>
<th style="text-align: left">サポートOS</th>
<th style="text-align: left">プログラミング言語</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">dynamic/DACSDKPingV.framework</td>
<td style="text-align: left">8.2.1</td>
<td style="text-align: left">iOS 8.0 以上</td>
<td style="text-align: left">Swift 3 もしくは Objective-C</td>
</tr>
</tbody></table>
<a href='#div-id-div' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='div-id-div'><div id="概要">概要</div></h2>

<ul>
<li>アプリのデータ収集を行い、バックグラウンドに遷移する際にそれらをPOSTリクエストします。</li>
</ul>
<a href='#div-id-div' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='div-id-div'><div id="使い方">使い方</div></h2>
<a href='#1-xcode-framework' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='1-xcode-framework'>1. Xcodeにframeworkを追加します</h3>

<ul>
<li><p>[Project navigator]-&gt;[プロジェクト]-&gt;[TARGETS]-&gt;[General]-&gt;[Embedded Binaries]-&gt;[+]-&gt;[Add Other]をクリックします。<br>
<q>DACSDKPingV.framework</q>を選択し、[Open]します。</p></li>
<li><p><q>DACSDKPingV.framework</q>がプロジェクト外にある場合は、<br>
[Project navigator]-&gt;[プロジェクト]-&gt;[TARGETS]-&gt;[Build Settings]-&gt;[Search Paths]-&gt;[Framework Search Paths]に、<br>
「<q>DACSDKPingV.framework</q>が配置されているフォルダ」を追加します。</p>

<ul>
<li>例) 次のようなフォルダ構成となる場合、<br>
<code>&quot;~/Documents/Developer/lib/DACSDKPingV.framework&quot;</code><br>
以下の設定になります。<br>
<code>FRAMEWORK_SEARCH_PATHS = &quot;~/Documents/Developer/lib/&quot;;</code><br></li>
</ul></li>
</ul>

<ul>
<li><q>Objective-C</q>を利用の場合、<br>
[Project navigator]-&gt;[プロジェクト]-&gt;[TARGETS]-&gt;[Build Options]-[Embeedded Content Contains Swift Code]を<q>YES</q>に設定します。</li>
</ul>
<a href='#2-framework-api' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='2-framework-api'>2. ソースコードにframeworkのAPIなどを追加します</h3>
<a href='#' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id=''>アプリケーション情報を送信する</h4>

<p>アプリ起動箇所(UIApplicationDelegate.application(_:didFinishLaunchingWithOptions:))などに、以下を実装します。</p>

<ol>
<li>PingVフレームワークをインポートします。(必須)</li>
<li>(AppDelegateなどで初期化していない場合、)DACSDKPingV.setupメソッドを呼び出します。(必須)</li>
<li>アプリケーションのオプション情報を追加します。(任意)<br>
詳細はDACSDKPingVApplicationDataCenterクラスのプロパティなどを確認ください。</li>
<li>デリゲートの設定をします。(任意)</li>
</ol>
<a href='#swift' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='swift'>swiftの例</h5>
<pre class="highlight plaintext"><code>// AppDelegate.swift に記載する場合

import UIKit

// --------------------------------------------------
// MARK: 1. PingVフレームワークをインポートします。(必須)
// --------------------------------------------------
import DACSDKPingV

@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate {
  var window: UIWindow?

  func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -&gt; Bool {
    // --------------------------------------------------
    // MARK: 2. setupメソッドを呼び出します。(必須)
    // --------------------------------------------------
    DACSDKPingV.shared.setup(oid: "OwnerIDを設定してください")

    // --------------------------------------------------
    // MARK: 3. アプリケーションのオプション情報を追加します。(任意)
    // --------------------------------------------------
    DACSDKPingV.shared.applicationDataCenter.page_id = "sample"
    DACSDKPingV.shared.applicationDataCenter.replaceExtras([
      "dev language": "swift",
      "library type": "dynamic-framework",
    ])

    // --------------------------------------------------
    // MARK: 4. デリゲートの設定を設定します。(任意)
    // -------------------------------------------------- 
    DACSDKPingV.sharedInstance.applicationDataCenter.delegate = self    

    return true
  }

  ...
}

// --------------------------------------------------
// MARK: 4. デリゲートの設定を設定します。(任意)
// --------------------------------------------------
extension AppDelegate: DACSDKPingVApplicationDataCenterDelegate {
    func dacSdkPingV(applicationDataCenter: DACSDKPingVApplicationDataCenter, didSendApplicationDataWithError error: Error?) {
        if let error: Error = error {
            print("ping failed: error = \(error).")
        }
        else {
            print("ping succeeded.")
        }
    }
}
</code></pre>
<a href='#objective-c' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='objective-c'>Objective-Cの例</h5>
<pre class="highlight objective_c"><code><span class="c1">// AppDelegate.m に記載する例
</span>
<span class="cp">#import "AppDelegate.h"
</span>
<span class="c1">// --------------------------------------------------
// MARK: 1. PingVフレームワークをインポートします。(必須)
// --------------------------------------------------
</span><span class="cp">#import &lt;DACSDKPingV/DACSDKPingV-Swift.h&gt;
</span>
<span class="c1">// --------------------------------------------------
// MARK: 4. デリゲートの設定をします。(任意)
// --------------------------------------------------
</span><span class="k">@interface</span> <span class="nc">AppDelegate</span> <span class="p">()</span> <span class="o">&lt;</span><span class="n">DACSDKPingVApplicationDataCenterDelegate</span><span class="o">&gt;</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">AppDelegate</span>
<span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="nf">application</span><span class="p">:(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFinishLaunchingWithOptions</span><span class="p">:(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span> <span class="p">{</span>
    <span class="c1">// --------------------------------------------------
</span>    <span class="c1">// MARK: 2. setupメソッドを呼び出します。(必須)
</span>    <span class="c1">// --------------------------------------------------
</span>    <span class="p">[</span><span class="n">DACSDKPingV</span><span class="p">.</span><span class="n">shared</span> <span class="nf">setupWithOid</span><span class="p">:</span><span class="s">@"OwnerIDを設定してください"</span><span class="p">];</span>

    <span class="c1">// --------------------------------------------------
</span>    <span class="c1">// MARK: 3. アプリケーションのオプション情報を追加します。(任意)
</span>   <span class="c1">// --------------------------------------------------
</span>    <span class="n">DACSDKPingV</span><span class="p">.</span><span class="n">shared</span><span class="p">.</span><span class="n">applicationDataCenter</span><span class="p">.</span><span class="n">page_id</span> <span class="o">=</span> <span class="s">@"sample"</span><span class="p">;</span>
    <span class="p">[</span><span class="n">DACSDKPingV</span><span class="p">.</span><span class="n">shared</span><span class="p">.</span><span class="n">applicationDataCenter</span> <span class="nf">replaceExtras</span><span class="p">:@{</span>
        <span class="s">@"dev language"</span><span class="o">:</span> <span class="s">@"Objective-C"</span><span class="p">,</span>
        <span class="s">@"library type"</span><span class="o">:</span> <span class="s">@"dynamic-framework"</span><span class="p">,</span>
    <span class="p">}];</span>

    <span class="c1">// --------------------------------------------------
</span>    <span class="c1">// MARK: 4. デリゲートの設定を設定します。(任意)
</span>    <span class="c1">// -------------------------------------------------- 
</span>    <span class="n">DACSDKPingV</span><span class="p">.</span><span class="n">shared</span><span class="p">.</span><span class="n">applicationDataCenter</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="n">self</span><span class="p">;</span>

    <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">...</span>

<span class="c1">// --------------------------------------------------
// MARK: 4. デリゲートの設定を設定します。(任意)
// -------------------------------------------------- 
</span><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">dacSdkPingVWithApplicationDataCenter</span><span class="o">:</span><span class="p">(</span><span class="n">DACSDKPingVApplicationDataCenter</span> <span class="o">*</span><span class="p">)</span><span class="n">applicationDataCenter</span> <span class="n">didSendApplicationDataWithError</span><span class="o">:</span><span class="p">(</span><span class="n">NSError</span> <span class="o">*</span><span class="p">)</span><span class="n">error</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@"ping failed: error = \(error)."</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@"ping succeeded."</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre>
<a href='#div-id-div' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='div-id-div'><div id="送信データ">送信データ</div></h2>
<a href='#' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id=''>アプリケーション情報</h3>

<p>以下のデータをJSON形式でPOSTリクエストします。<br>
データが設定されていない、取得できない場合、該当する項目は送信されません。</p>

<table><thead>
<tr>
<th style="text-align: left">Property</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Setter</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">oid</td>
<td style="text-align: left">string</td>
<td style="text-align: left">User(必須)</td>
<td style="text-align: left">データオーナーIDハッシュ<br>* nilや空文字が設定された場合はデータ送信時に失敗します。</td>
</tr>
<tr>
<td style="text-align: left">event_ids</td>
<td style="text-align: left">string</td>
<td style="text-align: left">User(任意)</td>
<td style="text-align: left">イベント識別子<br>* 複数の場合はカンマ区切り</td>
</tr>
<tr>
<td style="text-align: left">page_id</td>
<td style="text-align: left">string</td>
<td style="text-align: left">User(任意)</td>
<td style="text-align: left">ページ識別子</td>
</tr>
<tr>
<td style="text-align: left">location_accuracy</td>
<td style="text-align: left">double</td>
<td style="text-align: left">User(任意)</td>
<td style="text-align: left">位置情報: 精度</td>
</tr>
<tr>
<td style="text-align: left">longitude</td>
<td style="text-align: left">string</td>
<td style="text-align: left">User(任意)</td>
<td style="text-align: left">位置情報: 経度</td>
</tr>
<tr>
<td style="text-align: left">latitude</td>
<td style="text-align: left">string</td>
<td style="text-align: left">User(任意)</td>
<td style="text-align: left">位置情報: 緯度</td>
</tr>
<tr>
<td style="text-align: left">extras</td>
<td style="text-align: left">string</td>
<td style="text-align: left">User(任意)</td>
<td style="text-align: left">その他収集データ<br>* JSON形式</td>
</tr>
<tr>
<td style="text-align: left">idfa</td>
<td style="text-align: left">string</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">Advertising ID<br>* 利用不可の場合、nil扱いになります。</td>
</tr>
<tr>
<td style="text-align: left">idfa_limited</td>
<td style="text-align: left">int</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">Advertising ID利用可否<br>* (0: 可, 1:不可)</td>
</tr>
<tr>
<td style="text-align: left">td_ip</td>
<td style="text-align: left">string</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">IPアドレス<br>* <q>td_ip</q>(固定値)</td>
</tr>
<tr>
<td style="text-align: left">language</td>
<td style="text-align: left">string</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">言語設定</td>
</tr>
<tr>
<td style="text-align: left">locale</td>
<td style="text-align: left">string</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">地域設定</td>
</tr>
<tr>
<td style="text-align: left">timezone</td>
<td style="text-align: left">string</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">タイムゾーン</td>
</tr>
<tr>
<td style="text-align: left">carrier</td>
<td style="text-align: left">string</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">キャリア</td>
</tr>
<tr>
<td style="text-align: left">network</td>
<td style="text-align: left">string</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">インターネット接続方法<br>・<q>unknown</q><br>・<q>2G</q><br>・<q>3G</q><br>・<q>4G</q><br>・<q>WiFi</q></td>
</tr>
<tr>
<td style="text-align: left">os</td>
<td style="text-align: left">string</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">OS<br>* <q>iOS</q>(固定値)</td>
</tr>
<tr>
<td style="text-align: left">os_version</td>
<td style="text-align: left">string</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">OSバージョン</td>
</tr>
<tr>
<td style="text-align: left">useragent</td>
<td style="text-align: left">string</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">ユーザーエージェント<br> * DACSDKPingVが初期化された時点の値になります。</td>
</tr>
<tr>
<td style="text-align: left">device_model</td>
<td style="text-align: left">string</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">機種名</td>
</tr>
<tr>
<td style="text-align: left">device_maker</td>
<td style="text-align: left">string</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">メーカー<br>* <q>Apple</q>(固定値)</td>
</tr>
<tr>
<td style="text-align: left">height</td>
<td style="text-align: left">int</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">端末の画面サイズ: 縦</td>
</tr>
<tr>
<td style="text-align: left">width</td>
<td style="text-align: left">int</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">端末の画面サイズ: 横</td>
</tr>
<tr>
<td style="text-align: left">bundle_id</td>
<td style="text-align: left">string</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">Bundle ID</td>
</tr>
<tr>
<td style="text-align: left">app_name</td>
<td style="text-align: left">string</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">アプリ名</td>
</tr>
<tr>
<td style="text-align: left">app_version</td>
<td style="text-align: left">string</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">アプリバージョン<br> * BundleShortVersion(BundleVersion)</td>
</tr>
<tr>
<td style="text-align: left">url_scheme</td>
<td style="text-align: left">string</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">URLスキーム</td>
</tr>
<tr>
<td style="text-align: left">usagetime</td>
<td style="text-align: left">int</td>
<td style="text-align: left">SDK</td>
<td style="text-align: left">アプリ滞在時間<br>* フォアグラウンド開始～バックグラウンド開始までの時間(ms)</td>
</tr>
</tbody></table>
<a href='#div-id-div' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='div-id-div'><div id="改訂履歴">改訂履歴</div></h2>

<table><thead>
<tr>
<th style="text-align: left">バージョン</th>
<th style="text-align: left">日付</th>
<th style="text-align: left">詳細</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1.2.0</td>
<td style="text-align: left">2017/03/22</td>
<td style="text-align: left">DACSDKCore.frameworkを内包化</td>
</tr>
<tr>
<td style="text-align: left">1.1.0</td>
<td style="text-align: left">2017/01/23</td>
<td style="text-align: left">bitcode対応</td>
</tr>
<tr>
<td style="text-align: left">1.0.0</td>
<td style="text-align: left">2016/10/14</td>
<td style="text-align: left">リリース開始</td>
</tr>
</tbody></table>
<a href='#div-id-div' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='div-id-div'><div id="謝辞">謝辞</div></h2>

<p>このフレームワークは、以下のモジュールを使用しております。</p>

<table><thead>
<tr>
<th style="text-align: left">ライブラリ</th>
<th style="text-align: left">著作権</th>
<th style="text-align: left">ライセンス</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><a href="https://github.com/ashleymills/Reachability.swift">Reachability.swift</a></td>
<td style="text-align: left">Copyright &copy; 2016 Ashley Mills</td>
<td style="text-align: left">The MIT License</td>
</tr>
</tbody></table>
<a href='#div-id-div' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='div-id-div'><div id="著作権">著作権</div></h2>

<p>Copyright &copy; 2016 D.A.Consortium Inc. All rights reserved.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2017 <a class="link" href="https://www.dac.co.jp/" target="_blank" rel="external">D.A.Consortium Inc.</a>. All rights reserved. (Last updated: 2017-03-29)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.7.3</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
